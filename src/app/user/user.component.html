<div *ngIf="isLogin; else notLogin">
  <div *ngIf="role === 'ROLE_ADMIN';else notAdmin">
      <div class=" text-center">
          <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample"
            aria-expanded="false" aria-controls="collapseExample">Filter</button>
        </div><br>
        <div class="collapse" id="collapseExample">
          <form (change)="setPage(0)">
            <div class="row">
              <div class="col">
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">Filter by username</span>
                  </div>
                  <input type="text" class="form-control" name="username" [(ngModel)]="form.username" #username="ngModel">
                </div>
              </div>
              <div class="col">
                  <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1">Filter by name</span>
                      </div>
                      <input type="text" class="form-control" name="name" [(ngModel)]="form.name" #name="ngModel">
                    </div>
              </div>
            </div>
            <div class="row ">
              <div class="col">
                  <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1">Filter by email</span>
                      </div>
                      <input type="text" class="form-control" name="email" [(ngModel)]="form.email" #email="ngModel">
                      <!--<div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon1">@</span>
                        </div>
                      <input type="text" aria-label="Last name" class="form-control">-->
                    </div>
              </div>
      
              <div class="col ">
                <div class="input-group mb-3 ">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">Filter by account</span>
                  </div>
                  <div class="btn-group " (click)="setPage(0)">
                    <button type="button" class="btn btn-primary" (click)="form.activationCode=''"
                      [ngClass]="{'active':form.activationCode==''}">All</button>
                    <button type="button" class="btn btn-primary" (click)="form.activationCode='confirm'"
                      [ngClass]="{'active':form.activationCode=='confirm'}">Confirm</button>
                    <button type="button" class="btn btn-primary" (click)="form.activationCode='notconfirm'"
                      [ngClass]="{'active':form.activationCode=='notconfirm'}">Not confirm</button>
                  </div>
                </div>
              </div>     
            </div>
          </form>
        </div>

    <div class="row align-items-end mb-1">
      <div class="col">
        <h1 class="display-4">List of users ({{totalElements}})</h1>
      </div>
      <div class="col">
        <button *ngIf="role === 'ROLE_ADMIN'" (click)="deleteAll()"
          class="btn btn-danger float-right">DeleteAll</button>

          <div class="btn-group float-right mr-5 " role="group">
              <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon1">Sort by:</span>
              </div>
              <button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown"
                style="width: 200px">{{form.sortField}} : {{form.sortOrder}}</button>
              <div class="dropdown-menu" aria-labelledby="btnGroupDrop1" (click)="getAllUsers()">
                <a class="dropdown-item" (click)="form.sortField='username'" (click)=" form.sortOrder='ASC'">Username: a -> z</a>
                <a class="dropdown-item" (click)="form.sortField='username'" (click)="form.sortOrder='DESC'">Username: z -> a</a>
                <a class="dropdown-item" (click)="form.sortField='name' " (click)=" form.sortOrder='ASC'">Name: a -> z</a>
                <a class="dropdown-item" (click)="form.sortField='name' " (click)=" form.sortOrder='DESC'">Name: z -> a</a>
                <a class="dropdown-item" (click)="form.sortField='email' " (click)=" form.sortOrder='ASC'">Email: a -> z</a>
                <a class="dropdown-item" (click)="form.sortField='email' " (click)=" form.sortOrder='DESC'">Email: z -> a</a>
              </div>
            </div>
      </div>
    </div>
    <div *ngIf="listUsers.length > 0; else falseLength">
      <table class="table">
        <thead class="thead-dark">
          <tr>            
            <th scope="col">Full name</th>
            <th scope="col">Username</th>
            <th scope="col">Email</th>
            <th scope="col">Account</th>
            <th scope="col">Option</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of listUsers; let i = index">            
            <td>{{user.name}}</td>
            <td>{{user.username}}</td>
            <td>{{user.email}}</td>
            <td *ngIf="user.activationCode" style="color: red">Not confirm</td>
            <td *ngIf="!user.activationCode" style="color: green">Confirm</td>
            <td style="width: 10%">
              <button (click)="deleteUser(user)" class="btn btn-danger">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="row">
          <div class="col">
            <nav aria-label="Page navigation example">
              <ul class="pagination ">
                <li class="page-item" [ngClass]="{'disabled':page==0}">
                  <a class="page-link " aria-disabled="true" (click)=nextPage(false)>Previous</a>
                </li>
                <li class="page-item" *ngFor="let p of pages; let i = index" [ngClass]="{'active':page==i}">
                  <a class="page-link" (click)=setPage(i)>{{i+1}}</a>
                </li>
                <li class="page-item" [ngClass]="{'disabled':page==length-1}">
                  <a class="page-link" (click)=nextPage(true)>Next</a>
                </li>
              </ul>
            </nav>
          </div>
          <div class="col">
            <nav aria-label="Page navigation example">
              <ul class="pagination ">
                <li class="page-item disabled">
                  <a class="page-link " aria-disabled="true">Show by </a>
                </li>
                <li class="page-item" *ngFor="let s of sizes" [ngClass]="{'active':size==s}">
                  <a class="page-link" (click)=setSize(s)>{{s}}</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
    </div>
  </div>
</div>
<ng-template #falseLength>
  Empty list of users
</ng-template>

<ng-template #notLogin>
  <div class="alert alert-danger" role="alert">
    <h2 class="alert-heading">Oops...</h2>
    <hr>
    <h5 class="mb-0">Unauthorized users are denied access. Please <a routerLink="/login" class="alert-link">login</a>!
    </h5>
  </div>
</ng-template>

<ng-template #notAdmin>
    <div class="alert alert-danger" role="alert">
      <h2 class="alert-heading">Oops...</h2>
      <hr>
      <h5 class="mb-0">Sorry, error: access denied</h5>
    </div>
  </ng-template>