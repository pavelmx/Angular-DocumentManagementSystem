<nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
  <div class="container-fluid">
    <a class="navbar-brand  h1" style="color: white">Document Managament System</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navres" >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navres">
      <ul class="navbar-nav ml-auto " routerLinkActive="active">
        <li *ngIf="authority" class="nav-item ">
          <a class="nav-link" routerLink="document-add">Create document!</a>
        </li>
        <li *ngIf="authority === 'admin'" class="nav-item ">
          <a class="nav-link" routerLink="user">Show users</a>
        </li>
        <li *ngIf="authority === 'admin'" class="nav-item ">
          <a class="nav-link" routerLink="document">Show documents</a>
        </li>
        <li *ngIf="authority === 'user'" class="nav-item ">
          <a class="nav-link" routerLink="document">Show my documents</a>
        </li>

        <li *ngIf="authority === 'user'" class="nav-item ">
          <a class="nav-link" routerLink="profile">{{username}}</a>
        </li>
        <li *ngIf="authority === 'admin'" class="nav-item ">
          <a class="nav-link" routerLink="profile">{{username}} (Admin)</a>
        </li>
        <button *ngIf="authority" class="btn btn-danger" (click)="logout()">Logout</button>
      </ul>
    </div>
  </div>
</nav>



<br><br>


<div *ngIf="isLogin">
  <div *ngIf=!authority class="container text-center" style="max-width:400px;">
    <br>
    <h1 class="display-4 text-center">Login form</h1>

    <hr>
    <form name="form" (ngSubmit)="f.form.valid && onSubmitl()" #f="ngForm" novalidate>
      <div class="form-group">

        <input type="text" class="form-control" name="username" placeholder="Username" [(ngModel)]="form.username"
          #username="ngModel" required minlength="5"
          [ngClass]="{'is-valid':username.valid && username.touched,'is-invalid':username.invalid && username.touched}" />
        <div *ngIf="username.touched && username.invalid">
          <small class="form-text alert alert-danger" *ngIf="username.errors.required">Username is required</small>
          <small class="form-text alert alert-danger" *ngIf="username.errors.minlength">Username must be at least 5
            characters</small>
        </div>

      </div>
      <div class="form-group ">
        <input type="password" class="form-control" name="password" placeholder="Password" [(ngModel)]="form.password"
          #password="ngModel" required minlength="6"
          [ngClass]="{'is-valid':password.valid && password.touched,'is-invalid':password.invalid && password.touched}" />
        <div *ngIf="password.touched && password.invalid">
          <small class="form-text alert alert-danger" *ngIf="password.errors.required">Password is required</small>
          <small class="form-text alert alert-danger" *ngIf="password.errors.minlength">Password must be at least 6
            characters</small>
        </div>
      </div>
      <div class="form-group">
        <button class="btn btn-primary" routerLink="/profile" style="width:300px;"
          [disabled]="f.form.invalid">Login</button>

      </div>
    </form>
    <hr>
    <p>Don't have an account?
      <a routerLink="" (click)="form=''" class="btn btn-outline-success" (click)="isLogin=false">Register</a>
    </p>
  </div>
</div>
<div *ngIf="!isLogin" class="container text-center" style="max-width:500px;">
  <br>
  <h1 class="display-4">Registration form</h1>
  <hr>
  <form name="form" (ngSubmit)="f.form.valid && onSubmitr()" #f="ngForm" novalidate>
    <div class="form-group">
      <input type="text" class="form-control" placeholder="Your full name" name="name" [(ngModel)]="form.name"
        #name="ngModel" required maxlength="50" minlength="5"
        [ngClass]="{'is-valid':name.valid && name.touched,'is-invalid':name.invalid && name.touched}" />
      <div *ngIf="f.submitted && name.invalid || name.touched && name.invalid">
        <small class="form-text alert alert-warning" *ngIf="name.errors.required">Name is required</small>
        <small class="form-text alert alert-warning" *ngIf="name.errors.minlength">Name must be at least 5
          characters</small>
        <small class="form-text alert alert-warning" *ngIf="name.errors.maxlength">Name must be less than 50
          characters</small>
      </div>
    </div>
    <div class="form-group">
      <input type="text" class="form-control" placeholder="Username" name="username" [(ngModel)]="form.username"
        #username="ngModel" required minlength="5" maxlength="20"
        [ngClass]="{'is-valid':username.valid && username.touched,'is-invalid':username.invalid && username.touched}" />
      <div *ngIf="f.submitted && username.invalid || username.touched && username.invalid">
        <small class="form-text alert alert-warning" *ngIf="username.errors.required">Username is required</small>
        <small class="form-text alert alert-warning" *ngIf="username.errors.minlength">Username must be at least 5
          characters</small>
        <small class="form-text alert alert-warning" *ngIf="username.errors.maxlength">Username must be less than 20
          characters</small>
      </div>
    </div>
    <div class="form-group">

      <input type="text" class="form-control" placeholder="Email" name="email" [(ngModel)]="form.email" #email="ngModel"
        required email minlength="6" maxlength="50"
        [ngClass]="{'is-valid':email.valid && email.touched,'is-invalid':email.invalid && email.touched}" />
      <div *ngIf="f.submitted && email.invalid || email.touched && email.invalid">
        <small class="form-text alert alert-warning" *ngIf="email.errors.required">Email is required</small>
        <small class="form-text alert alert-warning" *ngIf="email.errors.email">Email must be a valid email
          address</small>
        <small class="form-text alert alert-warning" *ngIf="email.errors.maxlength">Email must be less than 50
          characters</small>
        <small class="form-text alert alert-warning" *ngIf="email.errors.minlength">Email must be at least 6
          characters</small>
      </div>
    </div>

    <div class="form-group">
      <input type="password" class="form-control" placeholder="Password" name="password" [(ngModel)]="form.password"
        #password="ngModel" required minlength="6"
        [ngClass]="{'is-valid':password.valid && password.touched,'is-invalid':password.invalid && password.touched}" />
      <div *ngIf="f.submitted && password.invalid || password.touched && password.invalid">
        <small class="form-text alert alert-warning" *ngIf="password.errors.required">Password is required</small>
        <small class="form-text alert alert-warning" *ngIf="password.errors.minlength">Password must be at least 6
          characters
        </small>
      </div>
    </div>

    <div class="form-group">
      <input type="password" class="form-control" placeholder="Confirm password" name="cpassword"
        [(ngModel)]="form.cpassword" #cpassword="ngModel" required
        [ngClass]="{'is-valid':form.password==form.cpassword && cpassword.touched,'is-invalid':form.password!=form.cpassword && cpassword.touched || cpassword.invalid && cpassword.touched}" />
      <div *ngIf="form.password!=form.cpassword ">
        <small class="form-text alert alert-warning">Passwords don't match</small>
      </div>
    </div>

    <div class="form-group">
      <button [disabled]="f.form.invalid || load || form.password!=form.cpassword" class="btn btn-primary"
        style="width:400px;">Register account</button>

    </div>
  </form>
  <hr>
  Already have an account?
  <a routerLink="" class="btn btn-outline-success" (click)="form=''" (click)="isLogin=true">Login</a>

</div>

<div *ngIf="authority">
  <router-outlet></router-outlet>
</div>