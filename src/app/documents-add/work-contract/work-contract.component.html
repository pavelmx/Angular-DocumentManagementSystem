<div class="container mt-5" *ngIf="isLogin; else notLogin">
  <h1 @fadeNameTable class="display-4 ">Add new <strong>Work contract</strong></h1>

  <hr>

  <br>
  <form @fadeFilter (ngSubmit)="f.form.valid && addDoc()" #f="ngForm" novalidate>
    <div class="row">
      <div class="col-3">
        <label for="id">Id</label>
        <input type="text" class="form-control" placeholder="auto complete" name="id" [(ngModel)]="form.id"
          #id="ngModel" disabled />
      </div>
      <div class="col">
        <div class="form-group">
          <label for="title">Title</label>
          <a data-toggle="collapse" href="#collapseTitle" role="button" aria-expanded="false"
            aria-controls="collapseExample">
            *</a>
          <div class="collapse" id="collapseTitle">
            <small class="form-text alert alert-info">
              Be careful, the title is set <strong>1 time</strong> and after successful creation of the document it
              <strong>can't be changed</strong>
            </small>
          </div>
          <input type="text" class="form-control" name="title" [(ngModel)]="form.title" #title="ngModel" required
            minlength="10" maxlength="100"
            [ngClass]="{'is-valid':title.valid && title.touched,'is-invalid':title.invalid && title.touched}" />
          <div *ngIf="f.submitted && title.invalid || title.touched && title.invalid">
            <small class="form-text alert alert-warning" *ngIf="title.errors.required">Title is required</small>
            <small class="form-text alert alert-warning" *ngIf="title.errors.minlength">Title must be at least 10
              characters</small>
          </div>
        </div>
      </div>

    </div>

    <div class="row">
      <div class="col-4">
        <div class="form-group">
          <label for="clientFullName">Employee full name</label>
          <input type="text" class="form-control" name="clientFullName" [(ngModel)]="form.clientFullName"
            #clientFullName="ngModel" required maxlength="100"
            [ngClass]="{'is-valid':clientFullName.valid && clientFullName.touched,'is-invalid':clientFullName.invalid && clientFullName.touched}" />
          <div *ngIf="f.submitted && clientFullName.invalid || clientFullName.touched && clientFullName.invalid">
            <small class="form-text alert alert-warning" *ngIf="clientFullName.errors.required">Employee full name is
              required</small>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="form-group">
          <label for="clientAdress">Employee adress</label>
          <input type="text" class="form-control" name="clientAdress" [(ngModel)]="form.clientAdress"
            #clientAdress="ngModel" required maxlength="255"
            [ngClass]="{'is-valid':clientAdress.valid && clientAdress.touched,'is-invalid':clientAdress.invalid && clientAdress.touched}" />
          <div *ngIf="f.submitted && clientAdress.invalid || clientAdress.touched && clientAdress.invalid">
            <small class="form-text alert alert-warning" *ngIf="clientAdress.errors.required">Employee adress is
              required</small>
          </div>
        </div>
      </div>
    </div>

    <!-- gggggggggggggggggggggg -->

    <div class="row">
        <div class="col">
            <div class="form-group">
              <label for="placeOfWork">Place of work</label>
              <input type="text" class="form-control" name="placeOfWork" [(ngModel)]="form.placeOfWork" #placeOfWork="ngModel"
                required maxlength="100"
                [ngClass]="{'is-valid':placeOfWork.valid && placeOfWork.touched,'is-invalid':placeOfWork.invalid && placeOfWork.touched}" />
              <div *ngIf="f.submitted && placeOfWork.invalid || placeOfWork.touched && placeOfWork.invalid">
                <small class="form-text alert alert-warning" *ngIf="placeOfWork.errors.required">Place of work is
                  required</small>
              </div>
            </div>
          </div>
      <div class="col">
        <div class="form-group">
          <label for="position">Position</label>
          <input type="text" class="form-control" name="position" [(ngModel)]="form.position" #position="ngModel"
            required maxlength="100"
            [ngClass]="{'is-valid':position.valid && position.touched,'is-invalid':position.invalid && position.touched}" />
          <div *ngIf="f.submitted && position.invalid || position.touched && position.invalid">
            <small class="form-text alert alert-warning" *ngIf="position.errors.required">Position is
              required</small>
          </div>
        </div>
      </div>      
      <div class="col-2">
        <div class="form-group">
          <label for="operationMode">Operation mode</label>
          <select required  class="custom-select" name="operationMode" [(ngModel)]="form.operationMode"  #operationMode="ngModel"         
            [ngClass]="{'is-valid':operationMode.valid && operationMode.touched,'is-invalid':operationMode.invalid && operationMode.touched}">
            <option *ngFor="let mode of listOfMode" [ngValue]="mode">{{mode.operationMode}}</option>
          </select>
          
          <div *ngIf="f.submitted && operationMode.invalid || operationMode.touched && operationMode.invalid">
            <small class="form-text alert alert-warning" *ngIf="operationMode.errors.required">Operation mode is
              required</small>
          </div>
        </div>
      </div>
      <div class="col-3">
        <div class="form-group">
          <label for="startWork">Start work</label>
          <input type="date" class="form-control" min="{{today}}" name="startWork" [(ngModel)]="form.startWork"
            #startWork="ngModel" required
            [ngClass]="{'is-valid':startWork.valid && startWork.touched,'is-invalid':startWork.invalid && startWork.touched}" />
          <div *ngIf="f.submitted && startWork.invalid || startWork.touched && startWork.invalid">
            <small class="form-text alert alert-warning" *ngIf="startWork.errors.required">Start work is
              required</small>
          </div>
        </div>
      </div>
    </div>

    <div class="row ">
        <div class="col">
            <div class="form-group">
              <label for="term">Term</label>
              <div class="input-group">
                <input type="number" min="0" class="form-control" name="term" [(ngModel)]="form.term"
                  #term="ngModel" required
                  [ngClass]="{'is-valid':term.valid && term.touched,'is-invalid':term.invalid && term.touched}" />
                <div class="input-group-append">
                  <span class="input-group-text" id="basic-addon2">days</span>
                </div>
              </div>
              <div *ngIf="f.submitted && term.invalid || term.touched && term.invalid">
                <small class="form-text alert alert-warning" *ngIf="term.errors.required">Term is
                  required</small>
              </div>
            </div>
          </div>
        <div class="col">
            <div class="form-group">
              <label for="workingHours">Working hours</label>
              <div class="input-group">
                <input type="number" min="0" class="form-control" name="workingHours" [(ngModel)]="form.workingHours"
                  #workingHours="ngModel" required
                  [ngClass]="{'is-valid':workingHours.valid && workingHours.touched,'is-invalid':workingHours.invalid && workingHours.touched}" />
                <div class="input-group-append">
                  <span class="input-group-text" id="basic-addon2">hours/week</span>
                </div>
              </div>
              <div *ngIf="f.submitted && workingHours.invalid || workingHours.touched && workingHours.invalid">
                <small class="form-text alert alert-warning" *ngIf="workingHours.errors.required">Working hours is
                  required</small>
              </div>
            </div>
          </div>
      <div class="col">
        <div class="form-group">
          <label for="holiday">Holiday</label>
          <div class="input-group">
            <input type="number" class="form-control" name="holiday" [(ngModel)]="form.holiday" #holiday="ngModel"
              required min="0"
              [ngClass]="{'is-valid':holiday.valid && holiday.touched,'is-invalid':holiday.invalid && holiday.touched}" />
            <div class="input-group-append">
              <span class="input-group-text" id="basic-addon2">days/year</span>
            </div>
          </div>
          <div *ngIf="f.submitted && holiday.invalid || holiday.touched && holiday.invalid">
            <small class="form-text alert alert-warning" *ngIf="holiday.errors.required">Holiday is
              required</small>
          </div>
        </div>
      </div>
      <div class="col">
          <div class="form-group">
            <label for="salary">Salary</label>
            <div class="input-group">
              <input type="number" class="form-control" name="salary" [(ngModel)]="form.salary" #salary="ngModel"
                required min="0"
                [ngClass]="{'is-valid':salary.valid && salary.touched,'is-invalid':salary.invalid && salary.touched}" />
              <div class="input-group-append">
                <span class="input-group-text" id="basic-addon2">$</span>
              </div>
            </div>
            <div *ngIf="f.submitted && salary.invalid || salary.touched && salary.invalid">
              <small class="form-text alert alert-warning" *ngIf="salary.errors.required">Salary is
                required</small>
            </div>
          </div>
        </div>
    </div>
    <!-- gggggggggggggggggggggg -->

    <div class="row ">
      <div class="col">
        <div class="form-group">
          <label for="otherInfo">Other info</label>
          <textarea maxlength="1000" class="form-control" name="otherInfo" rows="3" [(ngModel)]="form.otherInfo"
            #otherInfo="ngModel"></textarea>
        </div>
      </div>
    </div>

    <div class="form-group">
      <hr>
      <button [disabled]="f.form.invalid" class="btn btn-success">Add new contract</button>
      
    </div>
  </form>
</div>

<ng-template #notLogin>
  <div class="alert alert-danger" role="alert">
    <h2 class="alert-heading">Oops...</h2>
    <hr>
    <h5 class="mb-0">Unauthorized users are denied access. Please <a routerLink="/" class="alert-link">login</a>!
    </h5>
  </div>
</ng-template>